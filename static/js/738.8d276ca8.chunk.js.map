{"version":3,"file":"static/js/738.8d276ca8.chunk.js","mappings":"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","sources":["components/MDRenderer/index.tsx","pages/About/index.tsx"],"sourcesContent":["import {useEffect, useState} from 'react'\r\nimport { Marked } from 'marked'\r\nimport { markedHighlight } from 'marked-highlight'\r\nimport hljs from 'highlight.js'\r\nimport markedKatex from 'marked-katex-extension'\r\n\r\nimport \"highlight.js/scss/atom-one-dark.scss\"\r\nimport \"./index.scss\"\r\n// import store from '../../redux/store'\r\n// import { saveSelectedPostHtml } from '../../redux/actions'\r\n// import './hljs.scss'\r\n\r\ntype Props = {\r\n  markdown: string,\r\n  limit?:number,\r\n  showLimitContent:boolean,\r\n  darkMode:boolean,\r\n}\r\n\r\nconst marked = new Marked(\r\n  markedHighlight({\r\n    langPrefix: 'hljs language-',\r\n    highlight(code, lang, info) {\r\n      const language = hljs.getLanguage(lang) ? lang : 'plaintext';\r\n      const highlightedCode= hljs.highlight(code, { language }).value;\r\n      // return `<pre data-lang=\"${language}\"><code class=\"hljs ${language}\">${highlightedCode}</code></pre>`;\r\n      // return `<code class=\"hljs ${language}>${highlightedCode}</code>`\r\n      return highlightedCode;\r\n    }\r\n  }),\r\n);\r\nmarked.use(markedKatex());\r\n\r\n// 用于自定义目录跳转，使用markdown-navbar可删\r\n// let headerIndex = 0;\r\n// marked.use({\r\n//   extensions:[\r\n//     {\r\n//       name:\"heading\",\r\n//       renderer(token){\r\n//         return `<h${token.depth} id=\"heading-${headerIndex++}\">${token.text}</h${token.depth}>`\r\n//       }\r\n//     },\r\n//   ]\r\n// })\r\n\r\nexport default function MDRenderer({ markdown,limit=100,showLimitContent,darkMode }: Props) {\r\n  const [content, setContent] = useState<any>('');\r\n\r\n  useEffect(() => {\r\n    // 去掉 yaml front matter\r\n    let cleanedMarkdown: string = markdown.replace(/^-{3}[\\s\\S]*?-{3}/, '');\r\n    \r\n    if (showLimitContent && markdown!=='') {\r\n      // 移除 HTML 标签\r\n      let plainText = cleanedMarkdown.replace(/<[^>]*>/g, '');\r\n      // console.log(plainText);\r\n\r\n      if (plainText.length > limit) {\r\n        plainText = plainText.substring(0, limit) + '...';\r\n        // console.log(plainText);\r\n        \r\n      }\r\n      setContent(plainText);\r\n    } else {\r\n      // pre标签添加hljs标签，匹配自定义hljs样式\r\n      // let html = marked.parse(cleanedMarkdown).toString().replace(/<pre>/g,\"<pre id='hljs'>\");\r\n      \r\n      let html = marked.parse(cleanedMarkdown) as string;\r\n      // console.log(html);\r\n\r\n      //如果自实现目录取消注释\r\n      // store.dispatch(saveSelectedPostHtml(html));\r\n      \r\n      setContent(html);\r\n    }\r\n  }, [markdown, limit, showLimitContent]);\r\n\r\n  return (\r\n    <div className={showLimitContent?\"\":`${darkMode?'markdown-body-dark':'markdown-body'}`}>\r\n      {showLimitContent ? (\r\n        <div>{content}</div> \r\n      ) : (\r\n        <div dangerouslySetInnerHTML={{ __html: content }} /> \r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport PageTitle from \"../../components/PageTitle\"\r\nimport Card from \"../../components/Card\"\r\nimport avatar from \"../../assets/image/avatar.webp\";\r\nimport { AUTHOR } from \"../../utils/constants\";\r\nimport axios from \"axios\";\r\n// import store from \"../../redux/store\";\r\nimport MDRenderer from \"../../components/MDRenderer\";\r\nimport * as echarts from 'echarts/core';\r\nimport {\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  LegendComponent\r\n} from 'echarts/components';\r\nimport { PieChart } from 'echarts/charts';\r\nimport { LabelLayout } from 'echarts/features';\r\nimport { CanvasRenderer } from 'echarts/renderers';\r\nimport { useAppSelector } from \"../../redux/hooks\";\r\n\r\nimport \"./index.scss\"\r\n\r\necharts.use([\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  LegendComponent,\r\n  PieChart,\r\n  CanvasRenderer,\r\n  LabelLayout\r\n]);\r\n\r\nexport default function About() {\r\n  const [markdown,setMarkdown]=useState<string>('');\r\n  const pieChartRef=useRef<HTMLDivElement>(null);\r\n  // const [isDarkMode,setIsDarkMode]=useState<boolean>(store.getState().darkMode);\r\n  const darkMode=useAppSelector(state=>state.darkMode);\r\n  const categoriesList=useAppSelector(state=>state.categoriesList);\r\n\r\n  const getFormatCategoriesData=()=>{\r\n    let data=[];\r\n    // const {categoriesList}=store.getState();\r\n\r\n    data=Object.keys(categoriesList).map(key=>{\r\n      return({\r\n        name:key,\r\n        value:categoriesList[key].length,\r\n      })\r\n    });\r\n    return data;\r\n  }\r\n\r\n  useEffect(()=>{\r\n    // const unsubscribe=store.subscribe(()=>{\r\n    //   const {darkMode}=store.getState();\r\n    //   setIsDarkMode(darkMode);\r\n    // })\r\n\r\n    axios.get('/aboutme.md')\r\n    .then(res=>{\r\n      const {data}=res;\r\n      setMarkdown(data);\r\n    }).catch(err=>{\r\n      console.log(err);\r\n    });\r\n\r\n    // console.log(categoriesData);\r\n    // const unsubscribe=store.subscribe(()=>{\r\n    //   categoriesData=getFormatCategoriesData();\r\n    // });\r\n    const pieChartDom=pieChartRef.current;\r\n    const pieChart=echarts.init(pieChartDom);\r\n    // window.addEventListener('resize',()=>{\r\n    //   pieChart.resize();\r\n    // })\r\n    renderPieChart(pieChart);\r\n    \r\n    // return ()=>{\r\n    //   unsubscribe();\r\n    // }\r\n\r\n  },[])\r\n\r\n  const renderPieChart=(pieChart:any)=>{\r\n    let categoriesData=getFormatCategoriesData();\r\n\r\n    let option={\r\n      tooltip:{\r\n        triger:\"item\",\r\n        textStyle:{\r\n          fontFamily:\"CustomFont1\",\r\n        }\r\n      },\r\n      // legend: {\r\n      //   orient: 'vertical',\r\n      //   left: 'left'\r\n      // },\r\n      series: [\r\n        {\r\n          name: 'Categories',\r\n          type: 'pie',\r\n          radius: '80%',\r\n          data: categoriesData,\r\n          label:{\r\n            color:`${darkMode?\"#ffffffaa\":\"#000000aa\"}`,\r\n            fontFamily:\"CustomFont1\",\r\n            fontWeight:'bold',\r\n            fontSize:\"15\"\r\n          },\r\n          emphasis: {\r\n            itemStyle: {\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n    pieChart.setOption(option);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-main\">\r\n      <div className=\"page-main-title\">\r\n        <PageTitle title=\"About\" />\r\n      </div>\r\n\r\n      <div className=\"page-main-content\" style={{marginTop:\"15vh\"}}>\r\n        <Card darkMode={darkMode}>\r\n          <div className=\"about-main\">\r\n            <div className=\"about-avatar\">\r\n              <img src={avatar}/>\r\n            </div>\r\n\r\n            <div className=\"about-content\">\r\n              <div className={darkMode?\"about-content-title-dark\":\"about-content-title\"}>\r\n                {AUTHOR}\r\n              </div>\r\n\r\n              <div className=\"about-content-text\">\r\n                <MDRenderer\r\n                darkMode={darkMode}\r\n                markdown={markdown}\r\n                showLimitContent={false}\r\n                />\r\n              </div>\r\n\r\n              <div className={darkMode?\"about-chart-title-dark\":\"about-chart-title\"}>\r\n                文章数据列表\r\n              </div>\r\n\r\n              <div className=\"about-chart\">\r\n                <div className=\"about-chart-item\" ref={pieChartRef}/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":["marked","Marked","markedHighlight","langPrefix","highlight","code","lang","info","language","hljs","getLanguage","value","MDRenderer","_ref","markdown","limit","showLimitContent","darkMode","content","setContent","useState","useEffect","cleanedMarkdown","replace","plainText","length","substring","html","parse","_jsx","className","concat","children","dangerouslySetInnerHTML","__html","use","markedKatex","About","setMarkdown","pieChartRef","useRef","useAppSelector","state","categoriesList","axios","get","then","res","data","catch","err","console","log","pieChartDom","current","pieChart","echarts","renderPieChart","option","tooltip","triger","textStyle","fontFamily","series","name","type","radius","getFormatCategoriesData","Object","keys","map","key","label","color","fontWeight","fontSize","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","setOption","_jsxs","PageTitle","title","style","marginTop","Card","src","avatar","AUTHOR","ref","TitleComponent","TooltipComponent","LegendComponent","PieChart","CanvasRenderer","LabelLayout"],"sourceRoot":""}