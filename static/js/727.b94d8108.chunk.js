"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[727],{85147:(e,t,s)=>{s.d(t,{A:()=>c});var o=s(35475),a=s(83910),r=s(97929),n=s(70579);function c(e){let{category:t}=e;return(0,n.jsx)("div",{className:"category-main",children:(0,n.jsx)(o.k2,{to:"/categories/".concat(t),style:{textDecoration:"none"},children:(0,n.jsxs)("div",{className:"category-container",children:[(0,n.jsx)(a.g,{icon:r.G06}),(0,n.jsx)("span",{style:{marginLeft:"5px"},children:t})]})})})}},64101:(e,t,s)=>{s.d(t,{A:()=>d});var o=s(65043),a=s(2207),r=s(48857),n=s(37709),c=s(34),i=(s(21582),s(70579));const l=new a.Dz((0,r.x)({langPrefix:"hljs language-",highlight(e,t,s){const o=n.A.getLanguage(t)?t:"plaintext";return n.A.highlight(e,{language:o}).value}}));function d(e){let{markdown:t,limit:s=100,showLimitContent:a,darkMode:r}=e;const[n,c]=(0,o.useState)("");return(0,o.useEffect)((()=>{let e=t.replace(/^-{3}[\s\S]*?-{3}/,"");if(a&&""!==t){let t=e.replace(/<[^>]*>/g,"");t.length>s&&(t=t.substring(0,s)+"..."),c(t)}else{let t=l.parse(e);c(t)}}),[t,s,a]),(0,i.jsx)("div",{className:a?"":"".concat(r?"markdown-body-dark":"markdown-body"),children:a?(0,i.jsx)("div",{children:n}):(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})})}l.use((0,c.A)())},94075:(e,t,s)=>{s.d(t,{A:()=>n});var o=s(65043),a=s(35475),r=s(70579);function n(e){let{tag:t,reload:s=!1}=e;const[n,c]=(0,o.useState)(0);(0,o.useEffect)((()=>{let e=Math.floor(3*Math.random());c(e)}),[]);return(0,r.jsx)("div",{className:"tag-main",children:(0,r.jsx)(a.k2,{onClick:()=>{s&&window.location.reload()},to:"/tags/".concat(t),style:{textDecoration:"none"},children:(0,r.jsx)("div",{className:(i=n,"tag-bg-color-"+i),children:t})})});var i}},61173:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var o=s(65043),a=s(73216),r=s(79722),n=s(68329),c=s(64101),i=s(19359),l=s(43585),d=s(7650),h=s(42546),p=s(82452),f=s(53722),u=s(30119),m=s(62533),g=s(41402),v=s(78736),x=s(63236),j=s(24459),y=s(94075),w=s(85147),N=s(4413),T=s(83910),k=s(97929),b=s(89379),A=s(53536),S=s(70579);class C extends o.Component{constructor(e){super(e),this.getCurrentHashValue=()=>decodeURIComponent(window.location.hash.replace(/^#/,"")),this.winScroll=(0,A.throttle)((()=>{if(this.scrollEventLock)return;const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,t=this.getHeadingList().map((t=>(0,b.A)((0,b.A)({},t),{},{distanceToTop:Math.abs(e+this.props.headingTopOffset-t.offsetTop)}))),s=t.map((e=>e.distanceToTop)),o=Math.min(...s),a=t.find((e=>e.distanceToTop===o));a&&(this.props.updateHashAuto&&(a.dataId!==this.getCurrentHashValue()&&this.props.onHashChange(a.dataId,this.getCurrentHashValue()),this.updateHash(a.dataId)),this.setState({currentListNo:a.listNo}))}),300),this.winHashChange=()=>{this.scrollToTarget(this.state.navStructure)},this.state={currentListNo:"",navStructure:[]}}safeScrollTo(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;if(e)if("function"===typeof e.scrollTo){const a={top:t,left:s};o&&(a.behavior="smooth"),e.scrollTo(a)}else e===window?(document.documentElement.scrollTop=t,document.documentElement.scrollLeft=s):(e.scrollTop=t,e.scrollLeft=s)}refreshNav(e){this.addTargetTimeout&&clearTimeout(this.addTargetTimeout);const t=this.state.currentListNo;this.setState({navStructure:this.getNavStructure(e)},(()=>{this.addTargetTimeout=setTimeout((()=>{if(this.initHeadingsId(),t)this.setState({currentListNo:t});else if(this.state.navStructure.length){const{listNo:e}=this.state.navStructure[0];this.setState({currentListNo:e})}document.addEventListener("scroll",this.winScroll,!1),window.addEventListener("hashchange",this.winHashChange,!1)}),500)}))}componentDidMount(){const{source:e}=this.props;this.refreshNav(e)}componentWillReceiveProps(e){const{source:t}=e;this.refreshNav(t)}shouldComponentUpdate(e){if(e.source!==this.props.source){this.scrollEventLockTimer&&clearTimeout(this.scrollEventLockTimer),this.scrollEventLock=!0,this.safeScrollTo(window,0,0),this.safeScrollTo(this.refs.container,0,0),this.setState({currentListNo:""});const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6");Array.prototype.slice.apply(e).forEach((e=>e.dataset.id="")),this.scrollEventLockTimer=setTimeout((()=>{this.initHeadingsId(),this.scrollEventLock=!1}),500)}return!0}componentWillUnmount(){this.addTargetTimeout&&clearTimeout(this.addTargetTimeout),this.scrollTimeout&&clearTimeout(this.scrollTimeout),document.removeEventListener("scroll",this.winScroll,!1),window.removeEventListener("hashchange",this.winHashChange,!1)}trimArrZero(e){let t,s;for(t=0;t<e.length&&!e[t];t++);for(s=e.length-1;s>=0&&!e[s];s--);return e.slice(t,s+1)}getNavStructure(e){const t=null===e||void 0===e?void 0:e.replace(/^[^#]+\n/g,"").replace(/(?:[^\n#]+)#+\s([^#\n]+)\n*/g,"").replace(/^#\s[^#\n]*\n+/,"").replace(/```[^`\n]*\n+[^```]+```\n+/g,"").replace(/`([^`\n]+)`/g,"$1").replace(/\*\*?([^*\n]+)\*\*?/g,"$1").replace(/__?([^_\n]+)__?/g,"$1").trim(),s=/#+\s([^#\n]+)\n*/g,o=null===t||void 0===t?void 0:t.match(s);if(!o)return[];const a=o.map(((e,t)=>({index:t,level:e.match(/^#+/g)[0].length,text:e.replace(s,"$1")})));let r=0;a.forEach((e=>{e.level>r&&(r=e.level)}));let n=[];for(let c=0;c<a.length;c++){const e=a[c],{level:t}=e;for(;n.length&&n[n.length-1].level>t;)n.pop();if(0===n.length){const s=new Array(r).fill(0);s[t-1]+=1,n.push({level:t,arr:s}),e.listNo=this.trimArrZero(s).join(".");continue}const{arr:s}=n[n.length-1],o=s.slice();o[t-1]+=1,n.push({level:t,arr:o}),e.listNo=this.trimArrZero(o).join(".")}return a}scrollToTarget(e){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((()=>{const t=document.querySelector('[data-id="'.concat(e,'"]'));t&&"number"===typeof t.offsetTop&&this.safeScrollTo(window,t.offsetTop-this.props.headingTopOffset,0)}),0)}initHeadingsId(){const e=decodeURIComponent(this.props.declarative?window.location.hash.replace(/^#/,"").trim():(window.location.hash.match(/heading-\d+/g)||[])[0]);this.state.navStructure.forEach((t=>{const s=document.querySelectorAll("h".concat(t.level)),o=Array.prototype.slice.apply(s).find((e=>e.innerText.trim()===t.text.trim()&&(!e.dataset||!e.dataset.id)));o&&(o.dataset.id=this.props.declarative?"".concat(t.listNo,"-").concat(t.text):"heading-".concat(t.index),e&&e===o.dataset.id&&(this.scrollToTarget(e),this.setState({currentListNo:t.listNo})))}))}getHeadingList(){const e=[];return this.state.navStructure.forEach((t=>{const s=document.querySelectorAll("h".concat(t.level)),o=Array.prototype.slice.apply(s).find((s=>s.innerText.trim()===t.text.trim()&&!e.find((e=>e.offsetTop===s.offsetTop))));o&&e.push({dataId:this.props.declarative?t.text:"heading-".concat(t.index),listNo:t.listNo,offsetTop:o.offsetTop})})),e}updateHash(e){}render(){const{source:e}=this.props,t=this.getNavStructure(e).map((e=>{const t="title-anchor title-level".concat(e.level," ").concat(this.state.currentListNo===e.listNo?"active":"");return(0,S.jsxs)("div",{className:t,onClick:t=>{const s=this.props.declarative?"".concat(e.listNo,"-").concat(e.text):"heading-".concat(e.index);e.listNo!==this.state.currentListNo&&this.props.onHashChange(s,this.getCurrentHashValue()),this.props.onNavItemClick(t,t.target,s),this.updateHash(s),this.scrollToTarget(s),this.setState({currentListNo:e.listNo})},children:[this.props.ordered?(0,S.jsx)("small",{children:e.listNo}):null,e.text]},"title_anchor_".concat(Math.random().toString(36).substring(2)))}));return(0,S.jsx)("div",{className:"markdown-navigation ".concat(this.props.className),children:t})}}C.defaultProps={source:"",ordered:!0,headingTopOffset:0,updateHashAuto:!0,declarative:!1,className:"",onNavItemClick:()=>{},onHashChange:()=>{}};const L=C;var E=s(19395),H=s(9971);function M(e){let{markdown:t,showDrawer:s,callbackOnClose:a}=e;const[r,c]=(0,o.useState)(s),[i,d]=(0,o.useState)(window.innerWidth<=N.Pn),h=(0,H.G)((e=>e.darkMode));(0,o.useEffect)((()=>{c(s)}),[s]);(0,o.useEffect)((()=>{const e=()=>{d(window.innerWidth<=N.Pn)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);return(0,S.jsx)(S.Fragment,{children:i?(0,S.jsx)("div",{className:"toc-drawer-block",children:(0,S.jsx)(l.Ay,{theme:{token:{padding:0,paddingLG:0,paddingXS:0,colorBgElevated:h?"#1c1c2c99":"#ffffffcc"}},children:(0,S.jsxs)(E.A,{className:h?"toc-drawer-dark":"toc-drawer",placement:"right",open:r,onClose:()=>{c(!1),a()},width:250,closeIcon:null,children:[(0,S.jsxs)("div",{className:h?"toc-header-dark":"toc-header",children:[(0,S.jsx)(T.g,{icon:k.ITF}),"\xa0\u76ee\u5f55",(0,S.jsx)("hr",{})]}),(0,S.jsx)("div",{className:"toc-content",children:(0,S.jsx)(L,{source:t,headingTopOffset:60,ordered:!0})})]})})}):(0,S.jsxs)(n.A,{className:"aside-card",darkMode:h,children:[(0,S.jsxs)("div",{className:h?"toc-header-dark":"toc-header",children:[(0,S.jsx)(T.g,{icon:k.ITF}),"\xa0\u76ee\u5f55",(0,S.jsx)("hr",{})]}),(0,S.jsx)("div",{className:h?"toc-content-dark":"toc-content",children:(0,S.jsx)(L,{source:t,headingTopOffset:60,ordered:!0})})]})})}var I=s(4256),O=s(6051),P=s(85720),B=s(85318);function W(e){let{onClose:t,password:s}=e;const[a,r]=i.Ay.useMessage(),c=(0,H.G)((e=>e.darkMode)),d=(0,o.useRef)(null);return(0,S.jsx)(n.A,{darkMode:c,children:(0,S.jsxs)("div",{className:"lock-card-main",children:[(0,S.jsx)("div",{className:c?"lock-card-title-dark":"lock-card-title",children:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),(0,S.jsx)("div",{className:"wave-divider"}),(0,S.jsx)("div",{className:"lock-card-input-line",children:(0,S.jsxs)(l.Ay,{theme:{components:{Input:{activeBg:"#f6f6f6aa"},Message:{contentBg:"#ffffffda"}},token:c?{colorPrimary:"#393958"}:{colorPrimary:"#4086db"}},children:[r,(0,S.jsxs)(O.A.Compact,{style:{width:"100%"},children:[(0,S.jsx)(P.A,{ref:d,type:"password",placeholder:"password"}),(0,S.jsx)(B.Ay,{onClick:()=>{var e;(null===(e=d.current)||void 0===e?void 0:e.input.value)==s?t():a.open({type:"error",content:"\u5bc6\u7801\u9519\u8bef\uff01"})},type:"primary",children:"Submit"})]})]})})]})})}var _=s(79789);function F(){const{id:e}=(0,a.g)(),[t,s]=(0,o.useState)(""),[T,k]=(0,o.useState)(),[b,A]=(0,o.useState)(0),[C,L]=(0,o.useState)(!1),[E,O]=(0,o.useState)(N.V9),[P,B]=(0,o.useState)(!1),[F,D]=i.Ay.useMessage(),[G,V]=(0,o.useState)(window.location.href),$=(0,H.G)((e=>e.darkMode)),q=(0,H.j)(),R=(0,H.G)((e=>e.selectedPostConfig)),U=(0,a.Zp)();(0,o.useEffect)((()=>{k(R)}),[R]),(0,o.useEffect)((()=>{if(e||U("/"),r.A.get("/posts/".concat(e,".md")).then((t=>{s(t.data),A(t.data.length);const{postList:o}=_.A.getState();let a={};for(let s of o)if(s.id===e){a=s;break}L(a.lock),k(a)})).catch((t=>{console.log("Post: \u6587\u7ae0\u83b7\u53d6\u5931\u8d25",t),console.log(window.location.pathname),U("/articles/".concat(e))})),!N.t$){const e=window.location.href,t=e.indexOf("#");if(-1!==t){const s=e.substring(0,t);V(s)}}return()=>{q((0,I.XA)()),q((0,I.Qv)())}}),[]);return(0,S.jsx)("div",{className:"post-page-main",children:(0,S.jsxs)(l.Ay,{theme:{token:{colorBgElevated:"#ffffff80",colorFillContent:"#ffffffbb"},components:{Message:{contentBg:"#ffffffda"}}},children:[D,T?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"post-page-title",children:(0,S.jsx)(p.A,{title:T.title})}),(0,S.jsx)("div",{className:"post-page-body",children:C?(0,S.jsx)(W,{onClose:()=>{L(!1)},password:null===T||void 0===T?void 0:T.password}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:E?"post-page-body-content-container-showtoc":"post-page-body-content-container",children:(0,S.jsxs)(n.A,{darkMode:$,children:[(0,S.jsxs)("div",{className:"post-page-card-header",children:[(0,S.jsxs)("div",{className:"post-page-card-header-symbol",children:[(0,S.jsx)("div",{className:"post-page-card-header-symbol-tags",children:(()=>{if(T){const{tags:e=[]}=T;return e.map(((e,t)=>(0,S.jsx)("div",{className:"post-page-card-header-symbol-tag-block",children:(0,S.jsx)(y.A,{tag:e})},t)))}})()}),(0,S.jsx)("div",{className:"post-page-card-header-symbol-categories",children:(()=>{if(T){const{categories:e=[]}=T;return e.map(((e,t)=>(0,S.jsx)("div",{className:"post-page-card-header-symbol-category-block",children:(0,S.jsx)(w.A,{category:e})},t)))}})()})]}),(0,S.jsxs)("div",{className:"post-page-card-header-info",children:[(0,S.jsxs)("div",{style:$?{color:"#ffffffcc"}:{},children:[(0,S.jsxs)("span",{style:{fontWeight:"bolder"},children:[(0,S.jsx)(f.A,{}),"\xa0\u4f5c\u8005\uff1a"]}),null===T||void 0===T?void 0:T.author]}),(0,S.jsxs)("div",{style:$?{color:"#ffffffcc"}:{},children:[(0,S.jsxs)("span",{style:{fontWeight:"bold"},children:[(0,S.jsx)(u.A,{}),"\xa0\u53d1\u5e03\u65f6\u95f4\uff1a"]}),null===T||void 0===T?void 0:T.time]}),(0,S.jsxs)("div",{style:$?{color:"#ffffffcc"}:{},children:[(0,S.jsxs)("span",{style:{fontWeight:"bold"},children:[(0,S.jsx)(m.A,{}),"\xa0\u6587\u7ae0\u5b57\u6570\uff1a"]}),b]})]})]}),(0,S.jsx)("hr",{className:"hr-twill"}),(0,S.jsx)("div",{className:"post-page-card-container",children:(0,S.jsx)(c.A,{darkMode:$,markdown:t,showLimitContent:!1})}),(0,S.jsx)("hr",{className:"hr-twill"}),(0,S.jsxs)("div",{className:$?"post-page-card-footer-dark":"post-page-card-footer",children:[(0,S.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,S.jsxs)("span",{style:{fontWeight:"bold"},children:[(0,S.jsx)(g.A,{}),"\u6587\u7ae0\u94fe\u63a5\uff1a",(0,S.jsx)(v.A,{className:$?"copy-button-dark":"copy-button",onClick:async()=>{const e=G;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),F.open({type:"success",content:"\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f"});else{const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.top="-9999px",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{if(!document.execCommand("copy"))throw new Error("\u590d\u5236\u5931\u8d25");F.open({type:"success",content:"\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f"})}catch(t){i.Ay.error("\u590d\u5236\u94fe\u63a5\u51fa\u9519"),console.log("\u590d\u5236\u94fe\u63a5\u51fa\u9519",t)}document.body.removeChild(s)}}catch(s){i.Ay.error("\u590d\u5236\u94fe\u63a5\u51fa\u9519"),console.log("\u590d\u5236\u94fe\u63a5\u51fa\u9519",s)}}})]}),(0,S.jsx)("a",{href:G,children:G})]}),(0,S.jsx)("div",{style:{marginBottom:"5px"},children:(0,S.jsxs)("span",{style:{fontWeight:"bold"},children:[(0,S.jsx)(x.A,{}),"\u7248\u6743\u58f0\u660e\uff1a\u672c\u535a\u5ba2\u6240\u6709\u6587\u7ae0\u9664\u7279\u5225\u58f0\u660e\u5916\uff0c\u5747\u91c7\u7528 ",(0,S.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",children:"CC BY-NC-SA 4.0"})," \u8bb8\u53ef\u534f\u8bae\u3002\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u6765\u6e90 ",(0,S.jsx)("a",{href:"/",children:N.Ii})," !"]})})]})]})}),(0,S.jsx)("div",{className:"toc-container ".concat(E?"fade-in":"fade-out"),children:(0,S.jsx)(M,{showDrawer:P,markdown:t,callbackOnClose:()=>{B(!1)}})})]})})]}):(0,S.jsx)("div",{className:"post-page-body",children:(0,S.jsx)(n.A,{darkMode:$,children:(0,S.jsx)(d.A,{active:!0})})}),!C&&(0,S.jsx)(l.Ay,{theme:{token:(()=>{let e={colorBgElevated:$?"#46466c7b":"#ffffff7b",colorFillContent:$?"#686894bb":"#ffffffbb"};return $&&(e.hasOwnProperty("colorText")||(e.colorText="#ffffff99")),e})()},children:(0,S.jsx)(h.A,{className:"toc-btn",icon:(0,S.jsx)(j.A,{}),onClick:()=>{O(!E),B(!P)}})})]})})}}}]);
//# sourceMappingURL=727.b94d8108.chunk.js.map